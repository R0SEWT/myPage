---
const { class: className = '', delay = 0 } = Astro.props;
---

<div 
  class={`scroll-reveal opacity-0 translate-y-8 transition-all duration-700 ease-out ${className}`}
  data-delay={delay}
>
  <slot />
</div>

<script>
  // Intersection Observer para animaciones de scroll
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const element = entry.target as HTMLElement;
        const delay = parseInt(element.dataset.delay || '0');
        
        setTimeout(() => {
          element.classList.remove('opacity-0', 'translate-y-8');
          element.classList.add('opacity-100', 'translate-y-0');
        }, delay);
        
        observer.unobserve(element);
      }
    });
  }, observerOptions);

  // Observar todos los elementos con scroll-reveal
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.scroll-reveal').forEach(el => {
      observer.observe(el);
    });
  });
</script>
