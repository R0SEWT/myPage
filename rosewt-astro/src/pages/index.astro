---
import BaseLayout from '../layouts/BaseLayout.astro';
// import ThemeToggle from '../components/ThemeToggle.jsx';
import ProjectCard from '../components/ProjectCard.astro';
import { getCollection } from 'astro:content';

const projects = await getCollection('projects', p => p.data.published !== false);
---
<BaseLayout title="Rody Vilchez — Data & AI" description="Portafolio de proyectos en Data/ML, RAG y QA.">
  <header class="sticky top-0 z-40 backdrop-blur border-b border-slate-200/70 dark:border-slate-800 supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-slate-900/60">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#" class="font-semibold tracking-tight text-lg">Rody <span class="text-teal">Vilchez</span></a>
      <nav class="hidden md:flex gap-6 text-sm">
        <a href="#projects" class="hover:text-teal">Proyectos</a>
        <a href="#experience" class="hover:text-teal">Experiencia</a>
        <a href="#contact" class="hover:text-teal">Contacto</a>
      </nav>
      <div class="flex items-center gap-2">
        <!-- <ThemeToggle client:idle /> -->
        <a href="/cv.pdf" class="inline-flex items-center rounded-xl bg-teal px-3 py-1.5 text-sm font-semibold text-white hover:opacity-90">Descargar CV</a>
      </div>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section id="home" class="max-w-6xl mx-auto px-4 py-16 md:py-24 grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h1 class="text-3xl md:text-5xl font-bold leading-tight tracking-tight">
          Construyo soluciones <span class="text-teal">Data & IA</span> con enfoque aplicado
        </h1>
        <p class="mt-4 text-base md:text-lg text-slate-600 dark:text-slate-300">
          Estudiante de CS (8vo) y QA Trainee. ML práctico, RAG, CV y EDA con H2O. Busco roles de Data/ML con impacto.
        </p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#projects" class="rounded-xl bg-slate-900 text-white dark:bg-white dark:text-slate-900 px-4 py-2 text-sm font-semibold">Ver proyectos</a>
          <a href="https://github.com/R0SEWT" target="_blank" rel="noopener" class="rounded-xl border border-slate-200 dark:border-slate-800 px-4 py-2 text-sm font-semibold hover:bg-slate-50 dark:hover:bg-slate-800">GitHub</a>
        </div>
      </div>
    </section>

    <!-- Projects -->
    <section id="projects" class="py-16 md:py-24 bg-slate-50 dark:bg-slate-900/30">
      <div class="max-w-6xl mx-auto px-4">
        <div class="flex items-end justify-between gap-4">
          <h2 class="text-2xl md:text-3xl font-bold">Proyectos seleccionados</h2>
          <a href="https://github.com/R0SEWT?tab=repositories" target="_blank" rel="noopener" class="text-sm hover:text-teal">Ver todo →</a>
        </div>
        <div class="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {projects.map(({ id, data }) => (
            <ProjectCard
              href={data.url}
              title={data.title}
              desc={data.description}
              tags={data.tags}
              key={id}
            />
          ))}
        </div>
      </div>
    </section>

    <!-- TODO: experiencia/contacto iguales a tu HTML previo -->
  </main>

  <footer class="py-8 border-t border-slate-200 dark:border-slate-800 text-center text-sm text-slate-500">
    © {new Date().getFullYear()} Rody Vilchez — Lima, Perú
  </footer>
</BaseLayout>
